# =============================================================================
# .env.example — POC Gmail Automation n8n
# =============================================================================
# INSTRUCTIONS:
#   cp config/.env.example .env
#   Remplir .env avec vos valeurs réelles
#   NE JAMAIS committer .env dans Git
# =============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL
# -----------------------------------------------------------------------------
POSTGRES_DB=n8n_mail_poc
POSTGRES_USER=n8n
# Générer avec: openssl rand -hex 24
POSTGRES_PASSWORD=CHANGE_ME_strong_db_password

# -----------------------------------------------------------------------------
# n8n
# -----------------------------------------------------------------------------
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
# URL publique pour les webhooks (ex: https://n8n.mondomaine.com)
N8N_WEBHOOK_URL=http://localhost:5678

# Interface admin n8n
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
# Générer avec: openssl rand -hex 16
N8N_BASIC_AUTH_PASSWORD=CHANGE_ME_admin_password

# Clé de chiffrement n8n (credentials stockés en DB)
# Générer avec: openssl rand -hex 32
N8N_ENCRYPTION_KEY=CHANGE_ME_32char_encryption_key_here

# Timezone (Europe/Paris, America/New_York, etc.)
TIMEZONE=Europe/Paris

# Log level: error, warn, info, debug
N8N_LOG_LEVEL=info

# -----------------------------------------------------------------------------
# LLM — Anthropic Claude
# -----------------------------------------------------------------------------
# Clé API Anthropic: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-CHANGE_ME

# Modèle Claude à utiliser
# Options: claude-opus-4-6, claude-sonnet-4-6, claude-haiku-4-5-20251001
ANTHROPIC_MODEL=claude-sonnet-4-6

# Températures LLM (0.0 = déterministe, 1.0 = créatif)
LLM_TRIAGE_TEMPERATURE=0.1
LLM_DRAFT_TEMPERATURE=0.3

# Max tokens par appel LLM
LLM_MAX_TOKENS=2048

# -----------------------------------------------------------------------------
# Telegram Bot
# -----------------------------------------------------------------------------
# Token du bot (via @BotFather): https://t.me/botfather
TELEGRAM_BOT_TOKEN=CHANGE_ME:bot_token_here

# Chat ID de l'opérateur (obtenir via @userinfobot ou @getmyid_bot)
# Accepte un user ID ou group ID (group ID commence par -)
TELEGRAM_CHAT_ID=CHANGE_ME_chat_id

# ID Telegram autorisé à approuver les envois (doit correspondre à CHAT_ID)
TELEGRAM_AUTHORIZED_USER_ID=CHANGE_ME_user_id

# -----------------------------------------------------------------------------
# Google OAuth2 (Gmail)
# -----------------------------------------------------------------------------
# Ces valeurs sont configurées dans n8n via l'interface Credentials
# (pas utilisées directement dans docker-compose, pour référence seulement)
GMAIL_OAUTH_CLIENT_ID=CHANGE_ME.apps.googleusercontent.com
GMAIL_OAUTH_CLIENT_SECRET=CHANGE_ME_client_secret

# Adresse Gmail surveillée (pour vérification / logs)
GMAIL_MONITORED_ADDRESS=votre@gmail.com

# -----------------------------------------------------------------------------
# Mode DEMO / DRY_RUN
# -----------------------------------------------------------------------------
# true  = aucune action réelle (pas d'envoi, pas d'archivage, logs seulement)
# false = mode production (actions Gmail réelles)
DEMO_MODE=true

# -----------------------------------------------------------------------------
# Configuration métier
# -----------------------------------------------------------------------------
# Email d'escalade (pour les emails HIGH risk non traités)
ESCALATION_EMAIL=responsable@entreprise.com

# Heure du digest quotidien (format 24h, timezone = TIMEZONE ci-dessus)
DIGEST_HOUR=8
DIGEST_MINUTE=0

# Nombre max d'emails traités par run (protection)
MAX_EMAILS_PER_RUN=50

# TTL des données POC en jours (nettoyage automatique)
DATA_TTL_DAYS=30

# Score risk minimum pour alerte immédiate Telegram (0-100)
RISK_ALERT_THRESHOLD=70

# Labels Gmail à appliquer automatiquement (IDs Gmail)
# Obtenir les IDs via: Gmail API > users.labels.list
LABEL_ID_PROCESSED=Label_processed
LABEL_ID_P1=Label_p1_urgent
LABEL_ID_P2=Label_p2_normal
LABEL_ID_HIGH_RISK=Label_high_risk
LABEL_ID_DRAFT_READY=Label_draft_ready
